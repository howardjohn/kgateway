apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: route-secure
spec:
  parentRefs:
    - name: super-gateway
  hostnames:
    - "secureroute.com"
  rules:
    - backendRefs:
        - name: backend-0
          port: 8080
---
apiVersion: gateway.kgateway.dev/v1alpha1
kind: AgentgatewayPolicy
metadata:
  name: route-policy
spec:
  targetRefs:
  - group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: route-secure
  traffic:
    jwtAuthentication:
      mode: Strict
      providers:
      - issuer: https://solo.io
        jwks:
          inline: '{"keys":[{"use":"sig","kty":"RSA","kid":"9126925024517527692","n":"yyls-P4DV3rg5QhjmlK5WUtjv5CPiwoRcqjYuCne_mYk_1LDZ0donYeS05C-sRI_3p2DzdZerZ85_O6K__4D3T0dxjSi6vgVQjmYEzWThAL9N50ljv-Gmuh8V9Fps7WNje_vkVA3nQ7v-nVQLsOa3aw8uY1tHgpTQLxYb9ZGORQHGfmJZHQ_VwbtJiX0JZ4DtKN4znDe7uwUmokHdOV0Xao3aIb57qAyn5CNHV9fJaKFKJW-BVx_g3BYibXB-IMvBsjh-V-MJBwECWPLRTzxHohI2oAyV6k-tQG-rP8Bo8nvkgWDfYhf6JDYTE8lBG1fuHjr2yxMk42646QFaDwePQ","e":"AQAB","x5c":["MIIC1DCCAbygAwIBAgIBWjANBgkqhkiG9w0BAQsFADASMRAwDgYDVQQKEwdzb2xvLmlvMB4XDTI1MTExMzIxMDk1NFoXDTI1MTExMzIzMDk1NFowEjEQMA4GA1UEChMHc29sby5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMspbPj+A1d64OUIY5pSuVlLY7+Qj4sKEXKo2Lgp3v5mJP9Sw2dHaJ2HktOQvrESP96dg83WXq2fOfzuiv/+A909HcY0our4FUI5mBM1k4QC/TedJY7/hprofFfRabO1jY3v75FQN50O7/p1UC7Dmt2sPLmNbR4KU0C8WG/WRjkUBxn5iWR0P1cG7SYl9CWeA7SjeM5w3u7sFJqJB3TldF2qN2iG+e6gMp+QjR1fXyWihSiVvgVcf4NwWIm1wfiDLwbI4flfjCQcBAljy0U88R6ISNqAMlepPrUBvqz/AaPJ75IFg32IX+iQ2ExPJQRtX7h469ssTJONuuOkBWg8Hj0CAwEAAaM1MDMwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAJbf0yHhcn/E5F9xE31sL4NvHhCCcqKAjKjXrKe6qj7F0mSlX3QGXeXAis3JcRN/GSEsGp34/3ZaBUBxseoNTyRnQ0YCGpTZAZuX9A+j5IQPzXHcr7f/zTD/2csZGVVgzCJDebkYt7dllaUxSotqRMeV4czuznRrwTZJScHnhULa7w/XJd7FQkjqhXc3xcU/NEZqnbtMfXfMNUIy6oy9nhyU8wFAb3upxeLU4SNg8l2oVanWKKbBGl4tqjWT6N3K46ahGsODeeFHVaWiCuOT4Qw0dl0P65SxDw7hS4LTG3QY7BGNq4nC41adCUsB1MOIimBHJMhp9bmrJCER2t2Qb8s="]}]}'
      - issuer: https://solo.io
        jwks:
          inline: '{"keys":[{"use":"sig","kty":"RSA","kid":"451894257799681235","n":"qWsLNmexrMycsV8zhBIQ9W5EX_zloPveO-o6ggWKL1fSI3vhAGWIO5ZiYdl32qnSGAKFWKZIfRnvwmPYrxvMHpqAvM8NwNt92rwKN7e2rc-zL8XyJ6CxQY5lLlKoQDB48vjXIu2uP7h7xnCvom18SakDazA3950vBX3RUKZhUgMTp3EZ4dbwFEXtJRiYrmUeai2v0liffP2Sc3kG8xjh_tbFEExL4ugTQrvvs5tIcw_-xnBCIUNJ7S_U6zVadVBffQInaB0vGNWoDqw4l6Y1hjnG-o3M38vDmkOMzGemxC3q6dKzwHW5xVmoDIJI6OxHOYM35K42cxM602DEH95qDQ","e":"AQAB","x5c":["MIIC1DCCAbygAwIBAgIBHjANBgkqhkiG9w0BAQsFADASMRAwDgYDVQQKEwdzb2xvLmlvMB4XDTI1MTExMzIxMTg1MloXDTI1MTExMzIzMTg1MlowEjEQMA4GA1UEChMHc29sby5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKlrCzZnsazMnLFfM4QSEPVuRF/85aD73jvqOoIFii9X0iN74QBliDuWYmHZd9qp0hgChVimSH0Z78Jj2K8bzB6agLzPDcDbfdq8Cje3tq3Psy/F8iegsUGOZS5SqEAwePL41yLtrj+4e8Zwr6JtfEmpA2swN/edLwV90VCmYVIDE6dxGeHW8BRF7SUYmK5lHmotr9JYn3z9knN5BvMY4f7WxRBMS+LoE0K777ObSHMP/sZwQiFDSe0v1Os1WnVQX30CJ2gdLxjVqA6sOJemNYY5xvqNzN/Lw5pDjMxnpsQt6unSs8B1ucVZqAyCSOjsRzmDN+SuNnMTOtNgxB/eag0CAwEAAaM1MDMwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAEuBevnSIG9YLCuIQrdacK5lzzLbFqI31qJtIbgGmns081dG8qyU7nAwhdxYaDd9dr9geWxTg/SKBy0ybe52YRbft9xs1PdzNNk5rHXyzjoNJ7cC1KaMAJK6j3Y3rYV2c39FP4CGP97TfFeKF8iNFS0uU7dR6DFQW67v89UN5hf6ojBb+/XE60cuKsG3+qr9UVb11hoMBrGKzhGbbeB+2akfKzweiKMIbn8BF2Fe6YEppvdeiqDrVIqfN7FShxaoouoN9a2X1JCIEFn4tdbmQrNulxfKY6b7qfblFCAjGGt7ApgtaTpdIN39mB3cHCKGv0SQruGH6aVpo3CuoVtSG88="]},{"use":"sig","kty":"RSA","kid":"1866817754370401006","n":"vc04JRbvuty5t8FCyuWYd-buwXFVk-J2jfhmr75KlSzzTM7WjelV4veW-xKCJrnxl66y-O5aOYtpjTYIL44Whu55LaNAlmLpPkqdadaDTtQ1a8cWW_a7SJDsNAI7N1TdNlOMEvypIx78oVlBuj5buSctfo2R3UephXxe19E9xNh_Jx6NvoiJGN898NgwiZSzhizHGWdWhP-SQe3zDaMiJlQafz2qfYrQMBMFlZKiUK7ajZMjEovjT7Ab_i-IRc5vdU_Sy6N3EqaZEB-e-hdZPiyF2JnFA2L-ibovdDRkIldisKooVubQeh9AKZBOMhtOOKvXhs0KRZejjDH_2AwNWw","e":"AQAB","x5c":["MIIC1DCCAbygAwIBAgIBNzANBgkqhkiG9w0BAQsFADASMRAwDgYDVQQKEwdzb2xvLmlvMB4XDTI1MTExMzIxMjMyM1oXDTI1MTExMzIzMjMyM1owEjEQMA4GA1UEChMHc29sby5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL3NOCUW77rcubfBQsrlmHfm7sFxVZPido34Zq++SpUs80zO1o3pVeL3lvsSgia58ZeusvjuWjmLaY02CC+OFobueS2jQJZi6T5KnWnWg07UNWvHFlv2u0iQ7DQCOzdU3TZTjBL8qSMe/KFZQbo+W7knLX6Nkd1HqYV8XtfRPcTYfycejb6IiRjfPfDYMImUs4YsxxlnVoT/kkHt8w2jIiZUGn89qn2K0DATBZWSolCu2o2TIxKL40+wG/4viEXOb3VP0sujdxKmmRAfnvoXWT4shdiZxQNi/om6L3Q0ZCJXYrCqKFbm0HofQCmQTjIbTjir14bNCkWXo4wx/9gMDVsCAwEAAaM1MDMwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAFCqAy3jmhUh/g0fo45h8Ab8XLvqmMi01jfCEOCHPOkt/MibM8c/KdEAYzKTSEjfxMA73mTLXpsxQAZrkx/zUL50ZDUbBocGzhFzRykiRl4Bre9qh1mYW+OT4N5JsHuCTvs4ykq/ng0UGARGlqxRuSr+zitA8QvahHA9vfAtrqJfsi3ABTxTDj7XU4WztWDVETVNrk/U0dLB/BpXxDyq6gJgKVJG8hJU9Ry3aFcxS0JXkLH9+pwLtPZaQHSz56Hi5mfqeGus+/0J6WLkXQ1QYNboNFmE7X+6BeWPNzax2hEbbGj09hS8rbryKOmlvxgIgPf6QQ7gJmQu7fwxKh1qOcQ="]}]}'